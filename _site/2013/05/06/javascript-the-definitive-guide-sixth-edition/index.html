<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>JavaScript 权威指南（第 6 版）</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v2.0.3">
  <link rel="alternate" type="application/rss+xml" title="Jekyll • Simple, blog-aware, static sites - Feed" href="/feed.xml">
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/tuliang/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/about/">About</a>
  </li>
  <li>
    <a href="/feed.xml">via RSS</a>
  </li>
  <li>
    <a href="https://github.com/tuliang"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <h1 class="logo">
      <a href="/">
        <img src="/img/avatar.png" width="120" height="120" alt="Logo">
      </a>
    </h1>
    <nav class="main-nav unit hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/about/">About</a>
  </li>
  <li>
    <a href="/feed.xml">via RSS</a>
  </li>
  <li>
    <a href="https://github.com/tuliang"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
          <h1>JavaScript 权威指南（第 6 版）</h1>
          <p><img src="/images/2013/05/9787111376613-228x300.jpg" alt="9787111376613" width="228" height="300" class="cover" /></p>

<p>原作名：JavaScript: The Definitive Guide, Sixth Edition</p>

<p>ISBN：9787111376613</p>

<p>作者： David Flanagan</p>

<p>译者：淘宝前端团队</p>

<p>出版社：机械工业出版社</p>

<p>出版时间：2012-4</p>

<p>评价：☆☆☆☆☆</p>

<p>本书很好，特别是在代码方面，注释很详细，代码很清晰。有很多技术细节，很多以前知其然不知其所以然的东西，现在能都了解到。淘宝前端团队翻译有些生硬。不过介于他们不是专业翻译还是不妄求更多了，能把意思翻译到了我就满足了。</p>

<p>以前大多数情况是使用alert()来输出的，我想大部分人也是同样。其实我们可以通过使用console.log()来向控制台输出消息。这样我们能够在控制台中看到输出，alert()在很多情况下是很麻烦和会产生神奇的问题的。</p>

<p>JS很多地方都可以不写表示语句结束的分号，但是我觉得还是都写上分号比较好。例如：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">f</span>
<span class="p">(</span><span class="nx">a</span> <span class="o">+</span><span class="nx">b</span><span class="p">).</span><span class="nx">toString</span><span class="p">()</span>
</code></pre></div>
<p>在将分号省略掉后，JS会将代码看成是：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span><span class="nx">b</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>
</code></pre></div>
<p>而代码的本意明显不是这样。又例如：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">return</span>
<span class="nx">ture</span>
</code></pre></div>
<p>JS会将上面的代码解析为：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">return</span><span class="p">;</span>
<span class="nx">ture</span><span class="p">;</span>
</code></pre></div>
<p>我们可以发现，如果为了省略分号，往往会出现很多错误。在实际编程中就会变成神奇的现象，往往你调试很久都不会发现这个原因。</p>

<p>JS中的数字具有很高的精度，但事实上还是会出现一些问题：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="o">-</span> <span class="mf">0.2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">;</span>
</code></pre></div>
<p>在这里x不等于0.1，而y等于0.1。实际运行中，我们可以发现x的值是0.09999999999999998。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</code></pre></div>
<p>字符串既然不是对象，为什么它会有属性呢？只要引用了字符串s的属性，JS就会将字符串通过调用new String(s)的方式转换成对象。一旦属性引用结束，这个临时对象就会被销毁。下面的例子可以说明这个问题：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">len</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">len</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
</code></pre></div>
<p>变量t的值为undefined，并且在JS中数字和布尔值也同样有这个问题。</p>

<p>JS使用了函数作用域，变量在声明它们的函数体以及这个函数体嵌套的任意函数体内都是有定义的。到底是什么意思呢？我们来看下面这段代码：(更为详细的说明见：<a href="/images/2012/10/17/js-bianliang-shengmingtiqian.html" target="_blank">JS变量声明提前</a>)</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;global&#39;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
     <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span><span class="p">;</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">f</span><span class="p">();</span>
</code></pre></div>
<p>你可能认为输出是：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">global</span>
<span class="nx">local</span>
</code></pre></div>
<p>但是运行一下你就会发现实际结果是：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kc">undefined</span>
<span class="nx">local</span>
</code></pre></div>
<p>照成这种结果的原因的就是前面提到的函数作用域，在JS中上面的代码实际上是这样的：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;global&#39;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span>
     <span class="kd">var</span> <span class="nx">scope</span><span class="p">;</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
     <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span><span class="p">;</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">f</span><span class="p">();</span>
</code></pre></div>
<p>JS这个特性被非正式地称为声明提前，即JS函数里声明的所有变量都被提前至函数体的顶部，但是这个声明提前至声明却不赋值。由于JS拥有这种特性，在编写JS代码时一些程序员特意将变量声明放在函数体的顶部，而不是像其他语言中让变量声明和使用变量的代码尽量靠近。所以在函数体中使用到var来声明变量时，记得将声明和赋值语句放在函数体的顶部，避免因为这种特性造成变量值为undefined的BUG。</p>

<p>在JS中break和continue是可以使用标签语句的，标签语句最常用于循环体内部：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">mainloop</span><span class="o">:</span> <span class="k">while</span><span class="p">(</span><span class="nx">token</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
    <span class="c1">//运行到这里，会跳转到mainloop标签所在的那个地方</span>
    <span class="k">continue</span> <span class="nx">mainloop</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>通过原型继承创建一个新对象：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//inherit() 返回了一个继承自原型对象p的属性的新对象</span>
<span class="c1">//这里使用ECMAScript5中的Object.create()函数（如果存在的话）</span>
<span class="c1">//如果不存在Object.create()，则退化使用其他方法</span>
<span class="kd">function</span> <span class="nx">inherit</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>
     <span class="k">if</span><span class="p">(</span><span class="nx">p</span> <span class="o">==</span> <span class="kc">null</span><span class="p">){</span><span class="c1">//p是一个对象，但不能是null</span>
          <span class="k">throw</span> <span class="nx">TypeError</span><span class="p">();</span>
    <span class="p">}</span>

     <span class="k">if</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">){</span><span class="c1">//如果Object.create()存在</span>
          <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span><span class="c1">//直接使用它</span>
     <span class="p">}</span>

     <span class="c1">//否则进行进一步检测</span>
     <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">p</span><span class="p">;</span>
     <span class="k">if</span><span class="p">(</span><span class="nx">t</span> <span class="o">!==</span> <span class="s2">&quot;Object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">){</span>
          <span class="k">throw</span> <span class="nx">TypeError</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="kd">function</span> <span class="nx">f</span><span class="p">(){};</span><span class="c1">//定义一个空构造函数</span>
     <span class="nx">f</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span><span class="c1">//将其原型属性设为p</span>
     <span class="k">return</span> <span class="k">new</span> <span class="nx">f</span><span class="p">();</span><span class="c1">//使用f()创建p的继承对象</span>
<span class="p">}</span>
</code></pre></div>
<p>实参对象arguments有一个重要的用处，就是让函数可以操作任意数量的实参，例如下面的代码就是查找多个实参中最大的值：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">max</span><span class="p">(){</span>
     <span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
     <span class="c1">//遍历实参，查找并得到最大值</span>
     <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">){</span>
               <span class="nx">max</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="p">}</span>
     <span class="p">}</span>
     <span class="k">return</span> <span class="nx">max</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">999</span><span class="p">,</span> <span class="mi">555</span><span class="p">,</span> <span class="mi">666</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span><span class="c1">//输出999</span>
</code></pre></div>
<p>JS的闭包特性原理就是将作用域链作为对象保存了起来，例如下列代码：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;global&#39;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">checkscope</span><span class="p">(){</span>
     <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span><span class="p">;</span>
     <span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">scope</span><span class="p">;</span> <span class="p">}</span>
     <span class="k">return</span> <span class="nx">f</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">checkscope</span><span class="p">();</span>
</code></pre></div>
<p>执行结果是local，将代码修改成：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;global&#39;</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">checkscope</span><span class="p">(){</span>
     <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="s1">&#39;local&#39;</span><span class="p">;</span>
     <span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">scope</span><span class="p">;</span> <span class="p">}</span>
     <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">checkscope</span><span class="p">()();</span>
</code></pre></div>
<p>结果还是local，这是因为JS将checkscope的作用域链保存了下来，而不像其他语言返回后就将作用域销毁或者回收。</p>

<p>ECMAScript5中可以使用Array.isArray()函数来判断是否为数组。ECMAScript3则需要自己来实现这个函数：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">isArray</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">){</span>
     <span class="k">return</span> <span class="k">typeof</span> <span class="nx">o</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span>
     <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>String对象常用的4种使用正则表达式的方法：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">search</span>
<span class="nx">replace</span>
<span class="nx">match</span>
<span class="nx">split</span>
</code></pre></div>
<p>如果需要运行时动态创建正则表达式，需要使用RegExp对象。eval方法也可以实现，但是不建议使用。</p>

<p>勘错：
P10<br>
x &gt; y    // =&gt; false：大于等于
应为：
x &gt; y    // =&gt; false：大于</p>

<p>P11
return Math.sprt(a * a +    // 勾股定理 
我们称为b * b);<br>
应为：</p>

<p>return Math.sprt(a * a +  b * b);    // 我们称为勾股定理  </p>

<p>P113
本节讨论剩余的三种JavaScript语句——width、debugger和use strict
应为：
本节讨论剩余的三种JavaScript语句——with、debugger和use strict</p>

        </article>
      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>Published with <a href="http://pages.github.com">
        <img src="/img/footer-logo.svg" height="30" alt="GitHub Pages">
        </a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  




</body>
</html>
