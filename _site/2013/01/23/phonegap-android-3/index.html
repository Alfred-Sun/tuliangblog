<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>PhoneGap-Android开发环境搭建3-使用PhoneGap开发安卓应用</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v2.0.3">
  <link rel="alternate" type="application/rss+xml" title="Jekyll • Simple, blog-aware, static sites - Feed" href="/feed.xml">
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/tuliang/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/about/">About</a>
  </li>
  <li>
    <a href="/feed.xml">via RSS</a>
  </li>
  <li>
    <a href="https://github.com/tuliang"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/about/">About</a>
  </li>
  <li>
    <a href="/feed.xml">via RSS</a>
  </li>
  <li>
    <a href="https://github.com/tuliang"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
          <h1>PhoneGap-Android开发环境搭建3-使用PhoneGap开发安卓应用</h1>
          <p>PhoneGap下载地址：<a href="http://phonegap.com/download/" target="_blank"><a href="http://phonegap.com/download/">http://phonegap.com/download/</a></a></p>

<p><a href="/images/2013/01/3.1.png"><img class="alignnone size-full wp-image-2247" alt="3.1" src="/images/2013/01/3.1.png" width="261" height="149" /></a></p>

<p>下载到本地后，解压，然后打开lib下面的android文件夹</p>

<p><a href="/images/2013/01/3.2.png"><img class="alignnone size-full wp-image-2248" alt="3.2" src="/images/2013/01/3.2.png" width="626" height="301" /></a></p>

<p>打开之前创建的Android 项目</p>

<p>新建两个文件夹/libs 和 /assets/www（可能libs已经有了）
将cordova-2.3.0.js复制到目录/assets/www下
将cordova-2.3.0.jar复制到目录/libs下
将xml整个文件夹复制到目录/res下。</p>

<p>在/assets/www下建立index.html文件，代码如下</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;title&gt;</span> PhoneGap<span class="nt">&lt;/title &gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="na">src=</span><span class="s">&quot;cordova-2.3.0.js&quot;</span> <span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head &gt;</span>
    <span class="nt">&lt;body</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span> Hello PhoneGap<span class="nt">&lt;/h1 &gt;</span>
    <span class="nt">&lt;/body &gt;</span>

<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>对文档AndroiMainifest.xml进行修改
<a href="/images/2013/01/3.3.png"><img class="alignnone size-full wp-image-2249" alt="3.3" src="/images/2013/01/3.3.png" width="212" height="255" /></a></p>

<p>将以下代码放到uses-sdk 和 application之间</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;supports-screens</span>
        <span class="na">android:largeScreens=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:normalScreens=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:smallScreens=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:resizeable=</span><span class="s">&quot;true&quot;</span>
        <span class="na">android:anyDensity=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.CAMERA&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.VIBRATE&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.ACCESS_LOCATION_EXTRA_COMMANDS&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.INTERNET&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.RECEIVE_SMS&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.RECORD_AUDIO&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.RECORD_VIDEO&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.READ_CONTACTS&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.WRITE_CONTACTS&quot;</span> <span class="nt">/&gt;</span>  
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> <span class="nt">/&gt;</span>  
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.GET_ACCOUNTS&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.BROADCAST_STICKY&quot;</span> <span class="nt">/&gt;</span>
</code></pre></div>
<p>在activity标签中添加：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml">android:configChanges=&quot;orientation|keyboardHidden&quot;
</code></pre></div>
<p>修改完后，文件应该是这样的
<a href="/images/2013/01/3.4.png"><img class="alignnone size-large wp-image-2250" alt="3.4" src="/images/2013/01/3.4-1024x486.png" width="625" height="296" /></a></p>

<p>在libs目录的cordova-2.3.0.jar上点击右键，选择 Build Path-&gt;Add to Build Path</p>

<p>最后再修改下src下的Java主文件</p>

<p><a href="/images/2013/01/3.5.png"><img class="alignnone size-full wp-image-2251" alt="3.5" src="/images/2013/01/3.5.png" width="197" height="325" /></a></p>

<p>注释import android.app.Activity;
添加import org.apache.cordova.*;
将MainActivity的父类修改为DroidGap
将onCreate方法改为public
将onCreate方法中的setContentView(R.layout.activity_main);
改为super.loadUrl(&quot;file:///android_asset/www/index.html&quot;);</p>

<p>修改后的代码看上去应该是这样的
<a href="/images/2013/01/3.6.png"><img src="/images/2013/01/3.6.png" alt="3.6" width="655" height="458" class="alignnone size-full wp-image-2252" /></a></p>

<p>到此为止，我们就完成了
<a href="/images/2013/01/3.7.png"><img src="/images/2013/01/3.7.png" alt="3.7" width="718" height="829" class="alignnone size-full wp-image-2253" /></a></p>

        </article>
      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>Published with <a href="http://pages.github.com">
        <img src="/img/footer-logo.svg" height="30" alt="GitHub Pages">
        </a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  




</body>
</html>
